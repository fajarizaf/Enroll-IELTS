<?php ob_start(); ?><?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); ?><?phpclass Profile_model extends CI_Model {    function  __construct() {        parent::__construct();        date_default_timezone_set('Asia/Jakarta');        $this->load->helper('form');        $this->load->library('showuser');        $this->load->library('generated_tanggal');    }   public function updateprofile() {            $idusers = $this->session->userdata('idusers');            $title = $this->input->post('title');            $username = $this->input->post('username');            $last_name = $this->input->post('last_name');            $first_name = $this->input->post('first_name');            $gender = $this->input->post('gender');            $phone_number = $this->input->post('phone_number');            $email_address = $this->input->post('email_address');            $address = $this->input->post('address');            $city = $this->input->post('city');            $zipcode = $this->input->post('zipcode');            $country = $this->input->post('country');            $date = $this->input->post('date_of_birth');            $identity = $this->input->post('identity');            $number_identity = $this->input->post('number_identity');            $codecountryorigin = $this->input->post('codecountryorigin');            $codelang = $this->input->post('codelang');            $codesector = $this->input->post('codesector');            $codelevel = $this->input->post('codelevel');            $codequestion = $this->input->post('codequestion');            $country_applying = $this->input->post('country_applying');            $studying_english = $this->input->post('studying_English');            $level_of_education = $this->input->post('level_of_education');            $many_years = $this->input->post('many_years');            $specialneeds = $this->input->post('specialneeds');            $notes = $this->input->post('notes');            $useridfile = $this->input->post('uploadfile');            $userphoto = $this->input->post('uploadfile3');             if($codesector == '00') {                $codesector_other = $this->input->post('sector_other');            }  else {                $codesector_other =  '-';            }            if($codelevel == '0') {                $codelevel_other =  $this->input->post('level_other');            } else {                $codelevel_other =  '-';            }            if($codequestion == '0' ) {                $codequestion_other = $this->input->post('other_taking_test');            }  else {                $codequestion_other =  '-';            }            if($country_applying == '0') {                $country_applying_other = $this->input->post('other_country_applying');            }  else {                $country_applying_other =  '-';            }            if($specialneeds == 'YES') {                $specialneedsdesc = $this->input->post('specialneedsdesc');                $notes = $this->input->post('notes');            } else if ($specialneeds == 'NO') {                $specialneedsdesc = '-';                $notes = '-';            }            $dt = array(                "usertitle" => $title,                "username" => $username,                "userfamilyname" => $last_name,                "userfirstname" => $first_name,                "userothername" => 'x',                "usergender" => $gender,                "userphone" => $phone_number,                "useremail" => $email_address,                "useraddr1" => $address,                "useraddr2" => $country,                "useraddr3" => $city,                "useraddr4" => $zipcode,                "userdob" => $date,                "useridcard" => $identity,                "useridnumber" => $number_identity,                "usercountryorigin" => $codecountryorigin,                "userfirstlanguage" => $codelang,                "useroccupationsector" => $codesector,                "sector_other" => $codesector_other,                "useroccupationlevel" => $codelevel,                "level_other" => $codelevel_other,                "userwhytaketest" => $codequestion,                "userwhytaketest_other" => $codequestion_other,                "usertargetcountry" => $country_applying,                "usertargetcountry_other" => $country_applying_other,                "usertakenielts" => $specialneeds,                "userwherestudyingeng" => $studying_english,                "userlevelofeducation" => $level_of_education,                "useryearsofenglishstudy" => $many_years,                "userspecialcondition" => $specialneedsdesc,                "usernotes" => $notes,                "userstatus" => '1',                "useridfile" => $useridfile,                "userphoto" => $userphoto,                "created" => date("Y-m-d H:i:s"),                "updated" => date("Y-m-d H:i:s"),                );                    $this->db->where('idusers',$idusers);            $query =  $this->db->update("users", $dt);            $response = array('response' => 'sukses');            echo json_encode($response);   }}?>