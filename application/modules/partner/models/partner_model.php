<?php ob_start(); ?><?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); ?><?phpclass Partner_model extends CI_Model {    function  __construct() {        parent::__construct();        date_default_timezone_set('Asia/Jakarta');        $this->load->helper('form');        $this->load->library('showuser');        $this->load->library('generated_tanggal');    }        function getPartner($limit,$offset)    {        $this->db->limit($limit, $offset);        $this->db->where('partnerstatus', 1);        $this->db->order_by('idpartners', 'DESC');        $q =  $this->db->get("partners");        return $q->result();    }        public function count_partner() {            $this->db->where('partnerstatus', 1);            $query =  $this->db->get("partners");            return $query->num_rows();     }    public function getTestschedule() {      $partner = $this->uri->segment(3);      $query = $this->db->query('select * from branches where idpartners="'.$partner.'"');      foreach ($query->result() as $row ) { ?>                 <option value="<?php echo $row->idbranches ?>"><?php echo $row->branchname ?></option>     <?php  }    }    public function addpartner() {        $partnername = $this->input->post('partnername');        $isactive = $this->input->post('isactive');        $data = array(          'partnername' => $partnername,          'partnerstatus' => $isactive,          'created' => date("Y-m-d H:i:s")          );        $query = $this->db->insert('partners', $data);        if($query) {          $status = array('status'=> 'sukses');          echo json_encode($status);        } else {          $status = array('status'=> 'gagal');          echo json_encode($status);        }    }    function updatepartner() {        $idexams = $this->input->post('idpartners');        $modulename = $this->input->post('partnername');        $isactive = $this->input->post('isactives');                if($isactive) {          $status = 1;        } else {          $status = 0;        }        $data = array(          'partnername' => $modulename,          'partnerstatus' => $status,        );        $this->db->where('idpartners', $idexams);        $query = $this->db->update('partners', $data);          if($query) {            $status = array('status'=> 'sukses');            echo json_encode($status);          } else {            $status = array('status'=> 'gagal');            echo json_encode($status);          }    }    function getnewschedule() {        $this->db->where('schdate >', date("Y-m-d H:i:s"));        $this->db->join("branches","schedules.idbranches = branches.idbranches");        $this->db->join("exams","schedules.idexams = exams.idexams");        $this->db->limit(1);        $this->db->order_by('idschedules', 'DESC');        $q =  $this->db->get("schedules");        return $q->result();    }    function getupdatetest() {        $idbranches = $this->uri->segment(3);        $this->db->join("partners","branches.idpartners = partners.idpartners");        $this->db->where('idbranches', $idbranches );        $q =  $this->db->get("branches");        return $q->result();    }    function getedittest() {        $idbranches = $this->uri->segment(3);        $this->db->join("partners","branches.idpartners = partners.idpartners");        $this->db->where('idbranches', $idbranches );        $q =  $this->db->get("branches");        return $q->result();    }    function getpartnername($table,$id) {            $this->db->where('idpartners',$id);            $q = $this->db->get($table);            foreach ($q->result() as $row ) {                $name = $row->partnername;                return $name;            }    }    function deletepartner() {      $idexams = $this->input->post('idpartner');            $this->db->where('idpartners', $idexams);      $query = $this->db->delete('partners');        if($query) {          $status = array('status'=> $idexams);          echo json_encode($status);        }    }    }?>